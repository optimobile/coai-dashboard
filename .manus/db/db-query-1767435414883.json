{
  "query": "CREATE TABLE IF NOT EXISTS email_schedules (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  name VARCHAR(255) NOT NULL,\n  description TEXT,\n  templateKey VARCHAR(100) NOT NULL,\n  triggerType ENUM('user_activity', 'time_based', 'manual') NOT NULL,\n  triggerCondition JSON NOT NULL,\n  targetAudience ENUM('all_users', 'cohort', 'course_enrollees', 'inactive_users', 'custom_filter') NOT NULL,\n  audienceFilter JSON,\n  isActive BOOLEAN NOT NULL DEFAULT TRUE,\n  priority ENUM('low', 'normal', 'high', 'urgent') NOT NULL DEFAULT 'normal',\n  sendCount INT NOT NULL DEFAULT 0,\n  lastRunAt TIMESTAMP NULL,\n  nextRunAt TIMESTAMP NULL,\n  createdBy INT NOT NULL,\n  createdAt TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  updatedAt TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  INDEX idx_triggerType (triggerType),\n  INDEX idx_isActive (isActive),\n  INDEX idx_nextRunAt (nextRunAt)\n);\n\nCREATE TABLE IF NOT EXISTS email_schedule_runs (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  scheduleId INT NOT NULL,\n  runType ENUM('scheduled', 'manual', 'test') NOT NULL,\n  status ENUM('pending', 'running', 'completed', 'failed', 'cancelled') NOT NULL DEFAULT 'pending',\n  targetUserCount INT NOT NULL DEFAULT 0,\n  emailsSent INT NOT NULL DEFAULT 0,\n  emailsFailed INT NOT NULL DEFAULT 0,\n  startedAt TIMESTAMP NULL,\n  completedAt TIMESTAMP NULL,\n  errorMessage TEXT,\n  executionDetails JSON,\n  createdAt TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  INDEX idx_scheduleId (scheduleId),\n  INDEX idx_status (status),\n  INDEX idx_startedAt (startedAt)\n);\n\nCREATE TABLE IF NOT EXISTS user_activity_triggers (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  scheduleId INT NOT NULL,\n  userId INT NOT NULL,\n  activityType VARCHAR(100) NOT NULL,\n  activityDate TIMESTAMP NOT NULL,\n  scheduledSendDate TIMESTAMP NOT NULL,\n  status ENUM('pending', 'sent', 'cancelled', 'failed') NOT NULL DEFAULT 'pending',\n  queueId INT,\n  processedAt TIMESTAMP NULL,\n  createdAt TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  INDEX idx_scheduleId (scheduleId),\n  INDEX idx_userId (userId),\n  INDEX idx_status (status),\n  INDEX idx_scheduledSendDate (scheduledSendDate)\n);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 3VC7xi4RHX81jG7.65112bc774d1 --database K34VNBtbDJyjtW8qhrCBdB --execute CREATE TABLE IF NOT EXISTS email_schedules (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  name VARCHAR(255) NOT NULL,\n  description TEXT,\n  templateKey VARCHAR(100) NOT NULL,\n  triggerType ENUM('user_activity', 'time_based', 'manual') NOT NULL,\n  triggerCondition JSON NOT NULL,\n  targetAudience ENUM('all_users', 'cohort', 'course_enrollees', 'inactive_users', 'custom_filter') NOT NULL,\n  audienceFilter JSON,\n  isActive BOOLEAN NOT NULL DEFAULT TRUE,\n  priority ENUM('low', 'normal', 'high', 'urgent') NOT NULL DEFAULT 'normal',\n  sendCount INT NOT NULL DEFAULT 0,\n  lastRunAt TIMESTAMP NULL,\n  nextRunAt TIMESTAMP NULL,\n  createdBy INT NOT NULL,\n  createdAt TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  updatedAt TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  INDEX idx_triggerType (triggerType),\n  INDEX idx_isActive (isActive),\n  INDEX idx_nextRunAt (nextRunAt)\n);\n\nCREATE TABLE IF NOT EXISTS email_schedule_runs (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  scheduleId INT NOT NULL,\n  runType ENUM('scheduled', 'manual', 'test') NOT NULL,\n  status ENUM('pending', 'running', 'completed', 'failed', 'cancelled') NOT NULL DEFAULT 'pending',\n  targetUserCount INT NOT NULL DEFAULT 0,\n  emailsSent INT NOT NULL DEFAULT 0,\n  emailsFailed INT NOT NULL DEFAULT 0,\n  startedAt TIMESTAMP NULL,\n  completedAt TIMESTAMP NULL,\n  errorMessage TEXT,\n  executionDetails JSON,\n  createdAt TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  INDEX idx_scheduleId (scheduleId),\n  INDEX idx_status (status),\n  INDEX idx_startedAt (startedAt)\n);\n\nCREATE TABLE IF NOT EXISTS user_activity_triggers (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  scheduleId INT NOT NULL,\n  userId INT NOT NULL,\n  activityType VARCHAR(100) NOT NULL,\n  activityDate TIMESTAMP NOT NULL,\n  scheduledSendDate TIMESTAMP NOT NULL,\n  status ENUM('pending', 'sent', 'cancelled', 'failed') NOT NULL DEFAULT 'pending',\n  queueId INT,\n  processedAt TIMESTAMP NULL,\n  createdAt TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  INDEX idx_scheduleId (scheduleId),\n  INDEX idx_userId (userId),\n  INDEX idx_status (status),\n  INDEX idx_scheduledSendDate (scheduledSendDate)\n);",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 2369
}