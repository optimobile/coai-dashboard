{
  "query": "-- System Status Incidents Table\nCREATE TABLE IF NOT EXISTS `system_incidents` (\n  `id` int AUTO_INCREMENT NOT NULL PRIMARY KEY,\n  `title` varchar(255) NOT NULL,\n  `description` text NOT NULL,\n  `status` enum('investigating', 'identified', 'monitoring', 'resolved') NOT NULL DEFAULT 'investigating',\n  `severity` enum('minor', 'major', 'critical') NOT NULL,\n  `affectedServices` text,\n  `startedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `identifiedAt` timestamp NULL,\n  `monitoringAt` timestamp NULL,\n  `resolvedAt` timestamp NULL,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  `reportedBy` int NULL,\n  `reporterEmail` varchar(320) NULL,\n  `reporterName` varchar(255) NULL,\n  `isPublic` boolean NOT NULL DEFAULT true,\n  INDEX `idx_status_incident` (`status`),\n  INDEX `idx_severity_incident` (`severity`),\n  INDEX `idx_started_at` (`startedAt`)\n);\n\nCREATE TABLE IF NOT EXISTS `incident_updates` (\n  `id` int AUTO_INCREMENT NOT NULL PRIMARY KEY,\n  `incidentId` int NOT NULL,\n  `status` enum('investigating', 'identified', 'monitoring', 'resolved') NOT NULL,\n  `message` text NOT NULL,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `createdBy` int NULL,\n  INDEX `idx_incident_id_update` (`incidentId`)\n);\n\nCREATE TABLE IF NOT EXISTS `service_status` (\n  `id` int AUTO_INCREMENT NOT NULL PRIMARY KEY,\n  `serviceName` varchar(100) NOT NULL,\n  `displayName` varchar(255) NOT NULL,\n  `description` text NULL,\n  `status` enum('operational', 'degraded', 'partial_outage', 'major_outage') NOT NULL DEFAULT 'operational',\n  `category` enum('core', 'api', 'dashboard', 'training', 'compliance', 'other') NOT NULL DEFAULT 'other',\n  `lastCheckedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  INDEX `idx_service_name` (`serviceName`),\n  INDEX `idx_status_service` (`status`)\n);\n\nCREATE TABLE IF NOT EXISTS `uptime_metrics` (\n  `id` int AUTO_INCREMENT NOT NULL PRIMARY KEY,\n  `serviceName` varchar(100) NOT NULL,\n  `date` varchar(10) NOT NULL,\n  `uptimePercent` decimal(5, 2) NOT NULL,\n  `totalChecks` int NOT NULL,\n  `successfulChecks` int NOT NULL,\n  `failedChecks` int NOT NULL,\n  `avgResponseTimeMs` decimal(10, 2) NULL,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  INDEX `idx_service_date` (`serviceName`, `date`)\n);\n\nCREATE TABLE IF NOT EXISTS `api_metrics` (\n  `id` int AUTO_INCREMENT NOT NULL PRIMARY KEY,\n  `endpoint` varchar(255) NOT NULL,\n  `method` varchar(10) NOT NULL,\n  `responseTimeMs` int NOT NULL,\n  `statusCode` int NOT NULL,\n  `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `userId` int NULL,\n  INDEX `idx_endpoint_metrics` (`endpoint`),\n  INDEX `idx_timestamp_metrics` (`timestamp`)\n);\n\nCREATE TABLE IF NOT EXISTS `status_subscriptions` (\n  `id` int AUTO_INCREMENT NOT NULL PRIMARY KEY,\n  `email` varchar(320) NULL,\n  `phone` varchar(20) NULL,\n  `services` text NULL,\n  `notifyOnIncident` boolean NOT NULL DEFAULT true,\n  `notifyOnResolution` boolean NOT NULL DEFAULT true,\n  `notifyOnMaintenance` boolean NOT NULL DEFAULT true,\n  `isActive` boolean NOT NULL DEFAULT true,\n  `verifiedAt` timestamp NULL,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  INDEX `idx_email_subscription` (`email`),\n  INDEX `idx_active_subscription` (`isActive`)\n);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 3VC7xi4RHX81jG7.65112bc774d1 --database K34VNBtbDJyjtW8qhrCBdB --execute -- System Status Incidents Table\nCREATE TABLE IF NOT EXISTS `system_incidents` (\n  `id` int AUTO_INCREMENT NOT NULL PRIMARY KEY,\n  `title` varchar(255) NOT NULL,\n  `description` text NOT NULL,\n  `status` enum('investigating', 'identified', 'monitoring', 'resolved') NOT NULL DEFAULT 'investigating',\n  `severity` enum('minor', 'major', 'critical') NOT NULL,\n  `affectedServices` text,\n  `startedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `identifiedAt` timestamp NULL,\n  `monitoringAt` timestamp NULL,\n  `resolvedAt` timestamp NULL,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  `reportedBy` int NULL,\n  `reporterEmail` varchar(320) NULL,\n  `reporterName` varchar(255) NULL,\n  `isPublic` boolean NOT NULL DEFAULT true,\n  INDEX `idx_status_incident` (`status`),\n  INDEX `idx_severity_incident` (`severity`),\n  INDEX `idx_started_at` (`startedAt`)\n);\n\nCREATE TABLE IF NOT EXISTS `incident_updates` (\n  `id` int AUTO_INCREMENT NOT NULL PRIMARY KEY,\n  `incidentId` int NOT NULL,\n  `status` enum('investigating', 'identified', 'monitoring', 'resolved') NOT NULL,\n  `message` text NOT NULL,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `createdBy` int NULL,\n  INDEX `idx_incident_id_update` (`incidentId`)\n);\n\nCREATE TABLE IF NOT EXISTS `service_status` (\n  `id` int AUTO_INCREMENT NOT NULL PRIMARY KEY,\n  `serviceName` varchar(100) NOT NULL,\n  `displayName` varchar(255) NOT NULL,\n  `description` text NULL,\n  `status` enum('operational', 'degraded', 'partial_outage', 'major_outage') NOT NULL DEFAULT 'operational',\n  `category` enum('core', 'api', 'dashboard', 'training', 'compliance', 'other') NOT NULL DEFAULT 'other',\n  `lastCheckedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  INDEX `idx_service_name` (`serviceName`),\n  INDEX `idx_status_service` (`status`)\n);\n\nCREATE TABLE IF NOT EXISTS `uptime_metrics` (\n  `id` int AUTO_INCREMENT NOT NULL PRIMARY KEY,\n  `serviceName` varchar(100) NOT NULL,\n  `date` varchar(10) NOT NULL,\n  `uptimePercent` decimal(5, 2) NOT NULL,\n  `totalChecks` int NOT NULL,\n  `successfulChecks` int NOT NULL,\n  `failedChecks` int NOT NULL,\n  `avgResponseTimeMs` decimal(10, 2) NULL,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  INDEX `idx_service_date` (`serviceName`, `date`)\n);\n\nCREATE TABLE IF NOT EXISTS `api_metrics` (\n  `id` int AUTO_INCREMENT NOT NULL PRIMARY KEY,\n  `endpoint` varchar(255) NOT NULL,\n  `method` varchar(10) NOT NULL,\n  `responseTimeMs` int NOT NULL,\n  `statusCode` int NOT NULL,\n  `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `userId` int NULL,\n  INDEX `idx_endpoint_metrics` (`endpoint`),\n  INDEX `idx_timestamp_metrics` (`timestamp`)\n);\n\nCREATE TABLE IF NOT EXISTS `status_subscriptions` (\n  `id` int AUTO_INCREMENT NOT NULL PRIMARY KEY,\n  `email` varchar(320) NULL,\n  `phone` varchar(20) NULL,\n  `services` text NULL,\n  `notifyOnIncident` boolean NOT NULL DEFAULT true,\n  `notifyOnResolution` boolean NOT NULL DEFAULT true,\n  `notifyOnMaintenance` boolean NOT NULL DEFAULT true,\n  `isActive` boolean NOT NULL DEFAULT true,\n  `verifiedAt` timestamp NULL,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  INDEX `idx_email_subscription` (`email`),\n  INDEX `idx_active_subscription` (`isActive`)\n);",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 1942
}