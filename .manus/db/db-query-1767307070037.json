{
  "query": "CREATE TABLE IF NOT EXISTS user_quiz_attempts (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  userId INT NOT NULL,\n  lessonId INT NOT NULL,\n  quizId INT NOT NULL,\n  selectedAnswer INT NOT NULL,\n  isCorrect BOOLEAN NOT NULL,\n  attemptedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  INDEX idx_userId_lessonId (userId, lessonId),\n  INDEX idx_userId_quizId (userId, quizId)\n);\n\nCREATE TABLE IF NOT EXISTS user_quiz_scores (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  userId INT NOT NULL,\n  lessonId INT NOT NULL,\n  totalQuestions INT NOT NULL,\n  correctAnswers INT NOT NULL,\n  score DECIMAL(5, 2) NOT NULL,\n  passed BOOLEAN DEFAULT FALSE NOT NULL,\n  attemptNumber INT DEFAULT 1 NOT NULL,\n  completedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  INDEX idx_userId_lessonId (userId, lessonId)\n);\n\nCREATE TABLE IF NOT EXISTS forum_threads (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  courseId INT NOT NULL,\n  lessonId INT,\n  userId INT NOT NULL,\n  title VARCHAR(255) NOT NULL,\n  content TEXT NOT NULL,\n  isPinned BOOLEAN DEFAULT FALSE NOT NULL,\n  isLocked BOOLEAN DEFAULT FALSE NOT NULL,\n  viewCount INT DEFAULT 0 NOT NULL,\n  replyCount INT DEFAULT 0 NOT NULL,\n  lastActivityAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX idx_courseId (courseId),\n  INDEX idx_lessonId (lessonId),\n  INDEX idx_userId (userId),\n  INDEX idx_lastActivityAt (lastActivityAt)\n);\n\nCREATE TABLE IF NOT EXISTS forum_posts (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  threadId INT NOT NULL,\n  userId INT NOT NULL,\n  parentPostId INT,\n  content TEXT NOT NULL,\n  isEdited BOOLEAN DEFAULT FALSE NOT NULL,\n  editedAt TIMESTAMP NULL,\n  likeCount INT DEFAULT 0 NOT NULL,\n  isInstructorPost BOOLEAN DEFAULT FALSE NOT NULL,\n  isSolution BOOLEAN DEFAULT FALSE NOT NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX idx_threadId (threadId),\n  INDEX idx_userId (userId),\n  INDEX idx_parentPostId (parentPostId)\n);\n\nCREATE TABLE IF NOT EXISTS forum_post_likes (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  postId INT NOT NULL,\n  userId INT NOT NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  INDEX idx_postId (postId),\n  INDEX idx_userId_postId (userId, postId)\n);\n\nCREATE TABLE IF NOT EXISTS forum_notifications (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  userId INT NOT NULL,\n  threadId INT NOT NULL,\n  postId INT,\n  type ENUM('reply', 'mention', 'like', 'solution_marked') NOT NULL,\n  isRead BOOLEAN DEFAULT FALSE NOT NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  INDEX idx_userId (userId),\n  INDEX idx_isRead (isRead)\n)",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 3VC7xi4RHX81jG7.65112bc774d1 --database K34VNBtbDJyjtW8qhrCBdB --execute CREATE TABLE IF NOT EXISTS user_quiz_attempts (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  userId INT NOT NULL,\n  lessonId INT NOT NULL,\n  quizId INT NOT NULL,\n  selectedAnswer INT NOT NULL,\n  isCorrect BOOLEAN NOT NULL,\n  attemptedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  INDEX idx_userId_lessonId (userId, lessonId),\n  INDEX idx_userId_quizId (userId, quizId)\n);\n\nCREATE TABLE IF NOT EXISTS user_quiz_scores (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  userId INT NOT NULL,\n  lessonId INT NOT NULL,\n  totalQuestions INT NOT NULL,\n  correctAnswers INT NOT NULL,\n  score DECIMAL(5, 2) NOT NULL,\n  passed BOOLEAN DEFAULT FALSE NOT NULL,\n  attemptNumber INT DEFAULT 1 NOT NULL,\n  completedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  INDEX idx_userId_lessonId (userId, lessonId)\n);\n\nCREATE TABLE IF NOT EXISTS forum_threads (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  courseId INT NOT NULL,\n  lessonId INT,\n  userId INT NOT NULL,\n  title VARCHAR(255) NOT NULL,\n  content TEXT NOT NULL,\n  isPinned BOOLEAN DEFAULT FALSE NOT NULL,\n  isLocked BOOLEAN DEFAULT FALSE NOT NULL,\n  viewCount INT DEFAULT 0 NOT NULL,\n  replyCount INT DEFAULT 0 NOT NULL,\n  lastActivityAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX idx_courseId (courseId),\n  INDEX idx_lessonId (lessonId),\n  INDEX idx_userId (userId),\n  INDEX idx_lastActivityAt (lastActivityAt)\n);\n\nCREATE TABLE IF NOT EXISTS forum_posts (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  threadId INT NOT NULL,\n  userId INT NOT NULL,\n  parentPostId INT,\n  content TEXT NOT NULL,\n  isEdited BOOLEAN DEFAULT FALSE NOT NULL,\n  editedAt TIMESTAMP NULL,\n  likeCount INT DEFAULT 0 NOT NULL,\n  isInstructorPost BOOLEAN DEFAULT FALSE NOT NULL,\n  isSolution BOOLEAN DEFAULT FALSE NOT NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX idx_threadId (threadId),\n  INDEX idx_userId (userId),\n  INDEX idx_parentPostId (parentPostId)\n);\n\nCREATE TABLE IF NOT EXISTS forum_post_likes (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  postId INT NOT NULL,\n  userId INT NOT NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  INDEX idx_postId (postId),\n  INDEX idx_userId_postId (userId, postId)\n);\n\nCREATE TABLE IF NOT EXISTS forum_notifications (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  userId INT NOT NULL,\n  threadId INT NOT NULL,\n  postId INT,\n  type ENUM('reply', 'mention', 'like', 'solution_marked') NOT NULL,\n  isRead BOOLEAN DEFAULT FALSE NOT NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  INDEX idx_userId (userId),\n  INDEX idx_isRead (isRead)\n)",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 1365
}